<!doctype html>
<head>
  <meta charset="utf-8">
  <title>個人頁面</title>
  <meta name="viewport" content="width=device-width">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/css.css">
<!--引入初始化 Parse 的 js 檔案-->
  <script type="text/javascript" src="//www.parsecdn.com/js/parse-1.4.2.min.js"></script>
  <script  type="text/javascript">
  
    $(document).ready(function(){
      $(document).on('submit','#logInForm',function(e){
      console.log ("login") ;
      var username = $('#username').val() ;
      var password = $('#password').val() ;
      console.log("登入之前的 Parse.User.current()  : ", Parse.User.current()) ;
      Parse.User.logIn( username , password , {
      success: function(user) {
        console.log("登入之後的 Parse.User.current()  : ",Parse.User.current()) ;
        alert('登入成功') ;
        window.location = 'courseList.html' ;
      },
      error: function(user, error) {
        console.log(error) ;
        alert(error.message);
      alert ('您尚未登入') ; // 讓使用者知道轉址原因
      window.location = logIn.html ;
      return null ;
      /* 顯示登入者名稱，避免未登入者進入此頁面*/
          //提示 1 : 可用轉址的方式，讓未登入的使用者轉址到 logIn.html
          //提示 2 : 請在 <span id="name" > 中顯示使用者名稱，在 <span id="role">中顯示角色  
      
    });
  
    $(document).on('click',"#logOut",function(){
      console.log("Logout clicked");
      Parse.User.logOut();
      var currentUser = Parse.User.current();
      alert ('登出成功') ; // 讓使用者知道轉址原因
      window.location = logIn.html ;
      return null ;
      /* 執行登出動作，並轉址到 logIn 頁面*/
        // 可參考 : https://parse.com/docs/js/guide#users-current-user
      /* 結束 */
    });
  </script>
</head>
<body>
  <div class="container">
    <div class="row">
      <h2>你是已經簽到的<span id="role"></span>：
      <div class="form-group">
        <div class="col-md-4">
        <input id="username" name="username" type="text" placeholder="username" class="form-control input-md" required="">
        </div>
      </div><span id="name"></span></h2>
      <div id="logOut" class="btn btn-danger">登出</div>
      <a class="btn" href="attendantList.html">老師頁面</a>
    </div>
  </div>
</body>
</html>